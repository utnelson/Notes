# SSH

SSH or Secure Shell or Secure Socket Shell, is a network protocol that gives users a secure way to access a computer over an unsecured network.

## Keys
create a keypair with keygen. location `/home/username/.ssh`. It creates a private + public key  
```console
$ ssh-keygen
```
if there isn't a .ssh directory, you need to create one with permission `chmod 700`. This directory needs a `authorized_keys` file with permission `chmod 600` and contains the public key.
```console
$ mkdir .ssh
$ chmod 700 .ssh
$ cat id_rsa.pub >> authorized keys
$ chmod 600 authorized_keys
```

## Basic Usage

```console
$ ssh -i id_rsa user@<ip adress>

Options:
    -i  private key
```
`id_rsa` private key file needs permission `chmod 600` to read it.

## SCP
Copy file via ssh to target
```console
$ scp <local file> user@<IP target>:<directory target>
```

Copy file via ssh to local
```console
$ scp user@<IP target>:<directory target> <local file>
```
You may need to enter the password.

## Bruteforce SSH

[ssh2john](https://null-byte.wonderhowto.com/how-to/crack-ssh-private-key-passwords-with-john-ripper-0302810/)

```console
$ python2 /usr/share/john/ssh2john.py id_rsa.hash > hash
$ john --wordlist=/usr/share/wordlists/rockyou.txt hash
Press 'q' or Ctrl-C to abort, almost any other key for status
james13          (id_rsa.hash)  
1g 0:00:00:05 DONE (2022-03-14 18:55) 0.1831g/s 2626Kp/s 2626Kc/s 2626KC/s *7Â¡Vamos!                               
Session completed

james13 = passphrase

$ ssh james@10.10.144.53 -i id_rsa.hash

Warning: Permanently added '10.10.144.53' (ECDSA) to the list of known hosts.    
Enter passphrase for key 'id_rsa.hash': james13
```

## Portforwarding

```console
$ ssh -L 10000:localhost:10000 <username>@<ip>

Example if server is running on another address
$ ssh -l 8080:172.17.0.2:8080 <user>@<target IP>

Call it with 127.0.0.1:8080
```